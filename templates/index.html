<!doctype html>
<html lang="en" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/static/css/style.css">
    <title>PixelType</title>
</head>

<header id="header">
    <div class="logo">
        <span class="logo-text" style="font-family: Helvetica; font-weight: 500;">pixeltype</span>
    </div>
</header>

<style>
</style>

<body>

<div id="body" class="flex-center">
    <div class="container-6">
        <label for="authorInput"></label><input style="margin-top: 15px;" id="authorInput" type="text"
                                                placeholder="Author">
        <label for="titleInput"></label><input style="margin-top: 30px;" id="titleInput" type="text"
                                               placeholder="Title">
        <label for="textInput"></label><textarea placeholder="Type your story" name="" id="textInput"></textarea>
        <button onclick="insertText('#');"><img class="small-icon" src="/static/source/icons/title.png" alt=""></button>
        <button onclick="insertText('**text**')"><img class="small-icon" src="/static/source/icons/bold.png" alt="">
        </button>
        <button onclick="insertText('*text*');"><img class="small-icon" src="/static/source/icons/italic.png" alt="">
        </button>
        <button onclick="insertText('![](Image Link)');"><img class="small-icon" src="/static/source/icons/img.png"
                                                              alt=""></button>
        <!--        <button onclick="insertText('`python\n\n`');"><img class="small-icon" src="/static/source/icons/code.png"-->
        <!--                                                           alt=""></button>-->
        <div class="input__wrapper">
            <input name="file" type="file" id="input__file" class="input input__file" multiple>
            <label for="input__file" class="input__file-button">
                <span class="input__file-icon-wrapper">
                    <img class="input__file-icon" src="/static/source/icons/upload.png"
                         alt="Выбрать файл" style="width: 20px; height: 20px;"></span>
                <span class="input__file-button-text">Upload photo</span>
            </label>
        </div>
        <br><br>
        <button onclick="createPost();">Publish</button>
    </div>
</div>
</body>

<script src="/static/js/index.js"></script>
<script>
    document.getElementById('authorInput').value = localStorage.getItem('author');
    document.getElementById('titleInput').value = localStorage.getItem('title');
    document.getElementById('textInput').value = localStorage.getItem('text');
</script>
<script>
    const textarea = document.querySelector('textarea');

    textarea.addEventListener('input', function () {
        this.style.height = 'auto';
        this.style.height = this.scrollHeight + 'px';

        localStorage.setItem('text', document.getElementById('textInput').value);
        localStorage.setItem('title', document.getElementById('titleInput').value);
    });

    function insertText(text) {
        const textarea = document.getElementById('textInput');
        const startPos = textarea.selectionStart;
        const endPos = textarea.selectionEnd;
        const value = textarea.value;

        const newText = value.substring(0, startPos) + text + value.substring(endPos, value.length);
        textarea.value = newText;
        textarea.focus();

        localStorage.setItem('text', document.getElementById('textInput').value);
        localStorage.setItem('title', document.getElementById('titleInput').value);
    }

</script>
</html>
